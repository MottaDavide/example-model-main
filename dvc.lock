schema: '2.0'
stages:
  import:
    cmd: python script/dvc/01_dvc_import.py
    deps:
    - path: script/dvc/01_dvc_import.py
      hash: md5
      md5: 1dffb7a6797a22b5c11aae2b10455873
      size: 583
    params:
      params.yaml:
        import:
          iris_parquet: data/dvc/01_import/iris.parquet
    outs:
    - path: data/dvc/01_import/iris.parquet
      hash: md5
      md5: 5501845ef702e59bc1c0c4a6fb70875a
      size: 5629
  prepare:
    cmd: python script/dvc/02_dvc_prepare.py
    deps:
    - path: data/dvc/01_import/iris.parquet
      hash: md5
      md5: 5501845ef702e59bc1c0c4a6fb70875a
      size: 5629
    - path: script/dvc/02_dvc_prepare.py
      hash: md5
      md5: d1f2713c9463632e43bbcf81b58ad420
      size: 787
    params:
      params.yaml:
        prepare:
          seed: 113
          train_parquet: data/dvc/02_prepare/train.parquet
          valid_parquet: data/dvc/02_prepare/valid.parquet
          test_parquet: data/dvc/02_prepare/test.parquet
    outs:
    - path: data/dvc/02_prepare/test.parquet
      hash: md5
      md5: ac66f4a8d5092bb6235555e1fd92716c
      size: 6315
    - path: data/dvc/02_prepare/train.parquet
      hash: md5
      md5: 8bfcab29deb1a3a8d5ed57a5da58862b
      size: 6087
    - path: data/dvc/02_prepare/valid.parquet
      hash: md5
      md5: 1fed3faaf35bbe4163307fe681f307c1
      size: 5576
  train:
    cmd: "python src/app/cli.py  --train-file \"data/dvc/02_prepare/train.parquet\"\
      \ --valid-file \"data/dvc/02_prepare/valid.parquet\" --model-fit-file \"data/dvc/03_train/model_fit.pkl\"\
      \ --param-file \"params.yaml\"\n"
    deps:
    - path: ./script/dvc/03_dvc_train.py
      hash: md5
      md5: 5d16febafee8461e322846e401e0236b
      size: 1304
    - path: data/dvc/02_prepare/train.parquet
      hash: md5
      md5: 8bfcab29deb1a3a8d5ed57a5da58862b
      size: 6087
    - path: data/dvc/02_prepare/valid.parquet
      hash: md5
      md5: 1fed3faaf35bbe4163307fe681f307c1
      size: 5576
    - path: src/
      hash: md5
      md5: 02c7bea5767519c0ed0db1b4b5fa356b.dir
      size: 36654
      nfiles: 32
    params:
      params.yaml:
        train:
          seed: 321
          model:
            max_depth: 1
          model_fit_file: data/dvc/03_train/model_fit.pkl
    outs:
    - path: data/dvc/03_train/model_fit.pkl
      hash: md5
      md5: f1791ec2b223cd0e93a6620ec0c6d715
      size: 52613
  predict:
    cmd: python script/dvc/04_dvc_predict.py
    deps:
    - path: data/dvc/02_prepare/test.parquet
      hash: md5
      md5: ac66f4a8d5092bb6235555e1fd92716c
      size: 6315
    - path: data/dvc/03_train/model_fit.pkl
      hash: md5
      md5: f1791ec2b223cd0e93a6620ec0c6d715
      size: 52613
    - path: script/dvc/04_dvc_predict.py
      hash: md5
      md5: e58013eed662e6ed9f993e673b5065a4
      size: 823
    params:
      params.yaml:
        predict:
          seed: 321
          pred_parquet: data/dvc/04_predict/pred.parquet
    outs:
    - path: data/dvc/04_predict/pred.parquet
      hash: md5
      md5: 2b037ec5fcf9c9ec17011eb4c3a554c4
      size: 7000
  evaluate:
    cmd: python script/dvc/05_dvc_evaluate_classifier.py
    deps:
    - path: data/dvc/03_train/model_fit.pkl
      hash: md5
      md5: f1791ec2b223cd0e93a6620ec0c6d715
      size: 52613
    - path: data/dvc/04_predict/pred.parquet
      hash: md5
      md5: 2b037ec5fcf9c9ec17011eb4c3a554c4
      size: 7000
    - path: script/dvc/05_dvc_evaluate_classifier.py
      hash: md5
      md5: 4ccf3cc978acd20c2aec90edaba2e7f7
      size: 3523
    params:
      params.yaml:
        evaluate:
          positive_level_idx: 0
          proba_threshold: 0.12
    outs:
    - path: evaluation/metrics.json
      hash: md5
      md5: 0910de7614fafe5b55a94b3aa62f3c25
      size: 138
  build:
    cmd: bash script/dvc/07_dvc_build.sh
    deps:
    - path: data/dvc/03_train/model_fit.pkl
      hash: md5
      md5: f1791ec2b223cd0e93a6620ec0c6d715
      size: 52613
    - path: script/dvc/07_dvc_build.sh
      hash: md5
      md5: e7ec7069abb03f950676a103a2f0f590
      size: 273
    outs:
    - path: data/dvc/07_build/
      hash: md5
      md5: 515770ee728b3e986f9008277b8c242b.dir
      size: 62337
      nfiles: 3
